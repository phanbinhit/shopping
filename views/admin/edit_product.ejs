<head>
  <%- include("../partials/head") %>
</head>

<%- include("../partials/headeradmin") %>

<main role="main" class="container">
  <div class="starter-template">
    <h2 class="page-title">Edit The Product</h2>
    <a href="/admin/products" class="btn btn-primary">Back to all products</a>
    <br />

    <form action="/admin/products/edit-product/<%= id %>" method="POST" enctype="multipart/form-data">
      <div class="form-group">
        <label for="">Title</label>
        <input
          type="text"
          name="title"
          value="<%= title %>"
          class="form-control"
          placeholder="Title"
        />
      </div>

      <div class="form-group">
        <label for="">Branch</label>
        <input
          type="text"
          name="branch"
          value="<%= branch %>"
          class="form-control"
          placeholder="Branch"
        />
      </div>

      <div class="form-group">
        <label for="">Description</label>
        <textarea
          name="desc"
          class="form-control"
          cols="30"
          rows="10"
          placeholder="Description"
        >
<%= desc %></textarea
        >
      </div>

      <div class="form-group">
        <label for="">Price</label>
        <input
          type="text"
          name="price"
          value="<%= price %>"
          class="form-control"
          placeholder="Price"
        />
      </div>

      <div class="form-group">
        <label for="">Category</label>
        <select name="category" class="form-control">
          <% categories.forEach(function(cat){ %>
          <option value="<%= cat.slug %>"
            <% if (cat.slug == category) { %>
              selected="selected"
              <% } %>  
              >
            <%= cat.title %>
          </option>
          <% }); %>
        </select>
      </div>

      <div class="form-group">
        <label for="">Inventory Number</label>
        <input
          type="text"
          name="inventoryNumber"
          value="<%= inventoryNumber %>"
          class="form-control"
          placeholder="Inventory Number"
        />
      </div>

      <div class="form-group">
        <label for="">Sold Number</label>
        <input
          type="text"
          name="soldNumber"
          value="<%= soldNumber %>"
          class="form-control"
          placeholder="Sold Number"
        />
      </div>

      <div class="form-group">
        <label for="">Image</label>
        <input
          type="file"
          class="form-control"
          name="image"
          id="img"
          accept="image/gif, image/jpeg, image/png"
        />
        <img src="#" id="imgPreview" alt="" />
      </div>

      <button class="btn btn-light">Submit</button>
    </form>
  </div>
</main>

<script>
  function readURL(input) {
    if (input.files && input.files[0]) {
      var reader = new FileReader();

      reader.onload = function (e) {
        $("#imgPreview").attr("src", e.target.result).width(100).height(100);
      };

      reader.readAsDataURL(input.files[0]);
    }
  }

  $("#img").change(function () {
    readURL(this);
  });
</script>

<footer id="footer" class="bg-dark text-white py-5">
  <%- include ("../partials/footer") %>
</footer>
